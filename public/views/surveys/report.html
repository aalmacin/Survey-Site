<!--
        VIEW PURPOSE: The survey owner can view this page and the owner can export his/her survey using the button at the bottom of the page. All statistics and response data are stored here.
-->
<h2>Survey Statistics</h2>
<hr>
<div id="reportPage">
        <h3>{{ survey.description }}</h3>

        <div ng-repeat="question in survey.questions">
                <table class="table table-striped">
                        <tr>
                                <td>{{ question.text }}</td>
                        </tr>
                        <tr>
                        <td>
                                <table class="table">
                                        <thead>
                                                <th>Answer</th>
                                                <th>Votes</th>
                                        </thead>
                                        <tbody>
                                                <tr ng-repeat="answer in question.answers">
                                                        <td>{{ answer.text }}</td>
                                                        <td>{{ answer.responses.length }}</td>
                                                </tr>
                                        </tbody>
                                </table>
                        </td>
                        </tr>
                </table>
                <hr>
        </div>
        <div ng-repeat="question in survey.questions">
                <div>
                        <h4>Response to {{ question.text }}</h4>
                        <div class="answers" ng-repeat="answer in question.answers">
                                <div class="responses" ng-repeat="response in answer.responses track by $index">
                                        <p>Responded <b>{{ answer.text }}</b> at {{ response }}</p>
                                </div>
                        </div>
                </div>
                <hr>
        </div>
        <button class="btn btn-primary" type="button" ng-csv="getReport()" filename="report.csv">Export</button>
</div>


